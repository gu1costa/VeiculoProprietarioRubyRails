<%= form_with(model: [proprietario, veiculo], local: true) do |f| %>
  <% if veiculo.errors.any? %>
    <div class="alert alert-error">
      <strong>Não foi possível salvar:</strong>
      <ul style="margin-left: 18px; margin-top: 8px;">
        <% veiculo.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <label for="placa">Placa <span class="required">*</span></label>
    <%= f.text_field :placa,
                     id: "placa",
                     class: "form-control",
                     maxlength: 7,
                     placeholder: "MMM3M33",
                     required: true %>
  </div>

  <div class="form-group" style="margin-top: 14px;">
    <label for="renavam">RENAVAM <span class="required">*</span></label>
    <%= f.text_field :renavam,
                     id: "renavam",
                     class: "form-control",
                     maxlength: 11,
                     placeholder: "00000000000",
                     required: true,
                     inputmode: "numeric" %>
  </div>

  <div class="panel-actions">
    <%= f.submit "Salvar Alterações", class: "btn" %>
    <%= link_to "Cancelar", edit_proprietario_path(proprietario), class: "btn btn-outline" %>
  </div>
<% end %>

<script>
    document.getElementById('renavam')?.addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/\D/g, '');
    });

    document.getElementById('placa')?.addEventListener('input', function(e) {
        e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    });
</script>
